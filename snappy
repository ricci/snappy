#!/usr/bin/env python3

import sys
import re

from snappylib.place import Place
from snappylib.snapshot import Snapshot, snapshots
import snappylib.zfs as zfs
import snappylib.tarsnap as tarsnap
import snappylib.util as util
import snappylib.commands as commands

from subprocess import check_output

# XXX: should be in a config file
Place("test", "/test")

def usage():
    print("Do somethin' else")
    exit(1)

commands = { 'list'    : commands.list,
             'snap'    : commands.snapBoth,
             'zfssnap' : commands.snapZFS,
             'tssnap'  : commands.snapTS,
             'usage'   : usage,
             'nuke'    : commands.nuke,
             'check'   : commands.check }

if len(sys.argv) < 2:
    usage()
else:
    sys.argv.pop(0)
    commands.get(sys.argv.pop(0), usage)()
